@model Yeast.DomainClasses.Entities.User
@{
    ViewBag.Title = "‌کاربرها";
    ViewBag.SelectedPage = "User";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";

}
@section CssStyle{
    <link href="~/Content/css/ladda-themeless-rtl.min.css" rel="stylesheet" />
    <link href="~/Content/kartik-v-bootstrap-fileinput/css/fileinput.min.css" rel="stylesheet" />
    <link href="~/Content/css/select2.min.css" rel="stylesheet" />
    <link href="~/Content/css/select2-bootstrap.min.css" rel="stylesheet" />
}


<style>
    .kv-avatar .krajee-default.file-preview-frame, .kv-avatar .krajee-default.file-preview-frame:hover { margin: 0; padding: 0; border: none; box-shadow: none; text-align: center; }

    .kv-avatar { display: inline-block; }

        .kv-avatar .file-input { display: table-cell; width: 213px; }

    .kv-reqd { color: red; font-family: monospace; font-weight: normal; }
</style>

<div class="page-content">
    <!-- BEGIN PAGE HEADER-->
    <!-- BEGIN PAGE BAR -->
    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li>
                <a href="@Url.Action("Index","Dashboard", new { Area = "Admin" })">داشبورد</a>
                <i class="fa fa-circle"></i>
            </li>
            <li>
                <a href="#">مطلب</a>
                <i class="fa fa-circle"></i>
            </li>
            <li>
                <span>تگ‌ها</span>
            </li>
        </ul>
    </div>
    <!-- END PAGE BAR -->
    <!-- BEGIN PAGE TITLE-->
    <h1 class="page-title">
        <small></small>
    </h1>
    <!-- END PAGE TITLE-->
    <!-- END PAGE HEADER-->
    <div class="note note-info">
        <p> برچسب گذاری برای مدیریت مطالب و دسته‌بندی جزئی </p>
    </div>
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN SAMPLE FORM PORTLET-->
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption font-green-haze">
                        <i class="fa fa-plus font-green-haze"></i>
                        <span class="caption-subject bold uppercase">جدید</span>
                    </div>
                    <div class="actions">
                        <a class="btn btn-circle btn-icon-only btn-default fullscreen" href="javascript:;" data-original-title="تمام صفحه" title=""> </a>
                    </div>
                </div>
                <div class="portlet-body form">
                    <form role="form" data-loading-text="در حال ارسال فرم! لطفا منتظر باشید" class="form-horizontal" method="post" action="@Url.Action("Add")" enctype="multipart/form-data">
                        @Html.AntiForgeryToken()
                        @Html.ValidationSummary()
                        <div class="form-body">
                            <div class="alert alert-danger display-hide"><button class="close" data-close="alert"></button> لطفا موراد زیر را اصلاح نمایید.</div>
                            <div class="alert alert-success display-hide"><button class="close" data-close="alert"></button> فرم شما با موفقیت تایید اعتبار شد.</div>
                            <div class="form-group form-md-line-input">
                                <label class="col-md-1 control-label" for="Title">انتخاب عکس</label>
                                <div class="col-sm-4 text-center">
                                    <div class="kv-avatar">
                                        <div class="file-loading">
                                            <input id="user-avatar" name="user-avatar" type="file" required>
                                        </div>
                                    </div>
                                    <div class="kv-avatar-hint"><small>سایز فایل باید کمتر از 1500 کیلوبایت باشد</small></div>
                                </div>
                            </div>
                            <div class="form-group form-md-line-input">
                                <label class="col-md-1 control-label" for="Title">نام</label>
                                <div class="col-md-11">
                                    <input type="text" class="form-control" id="FirstName" name="FirstName" value="@Model.FirstName" required placeholder="عنوان را وارد نمایید">
                                    @Html.ValidationMessageFor(model => model.FirstName)
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                            <div class="form-group form-md-line-input">
                                <label class="col-md-1 control-label" for="Title">نام‌خانوادگی</label>
                                <div class="col-md-11">
                                    <input type="text" class="form-control" id="LastName" name="LastName" value="@Model.LastName" required placeholder="عنوان را وارد نمایید">
                                    @Html.ValidationMessageFor(model => model.LastName)
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                            <div class="form-group form-md-line-input">
                                <label class="col-md-1 control-label" for="Title">ایمیل</label>
                                <div class="col-md-11">
                                    <input type="text" class="form-control" id="Email" name="Email" value="@Model.Email" required placeholder="عنوان را وارد نمایید">
                                    @Html.ValidationMessageFor(model => model.Email)
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                            <div class="form-group form-md-line-input">
                                <label class="col-md-1 control-label" for="BirthDay">تاریخ تولد</label>
                                <div class="col-md-11">
                                    <input type="text" class="form-control" id="BirthDay" name="BirthDay" value="@Model.BirthDay" placeholder="توضیحات را وارد نمایید">
                                    @Html.ValidationMessageFor(model => model.BirthDay)
                                    <div class="form-control-focus"> </div>
                                    <span class="help-block">این توضیحات فقط برای راهنمایی است.</span>
                                </div>
                            </div>
                            <div class="form-group form-md-line-input">
                                <label class="col-md-1 control-label" for="BirthDay">کلمه عبور</label>
                                <div class="col-md-11">
                                    <input type="text" class="form-control" id="Password" name="Password" value="" placeholder="توضیحات را وارد نمایید">
                                    <div class="form-control-focus"> </div>
                                    <span class="help-block">این توضیحات فقط برای راهنمایی است.</span>
                                </div>
                            </div>
                            <div class="form-group form-md-line-input">
                                <label class="col-md-1 control-label" for="BirthDay">تکرار کلمه عبور</label>
                                <div class="col-md-11">
                                    <input type="text" class="form-control" id="ConfirmPassword" name="ConfirmPassword" value="" placeholder="توضیحات را وارد نمایید">
                                    <div class="form-control-focus"> </div>
                                    @Html.ValidationMessageFor(model => model.Password)
                                    <span class="help-block">این توضیحات فقط برای راهنمایی است.</span>
                                </div>
                            </div>
                            <div class="form-group form-md-line-input">
                                <label class="col-md-1 control-label" for="Description">توضیحات</label>
                                <div class="col-md-11">
                                    <input type="text" class="form-control" id="Description" name="Description" value="@Model.Description" placeholder="توضیحات را وارد نمایید">
                                    @Html.ValidationMessageFor(model => model.Description)
                                    <div class="form-control-focus"> </div>
                                    <span class="help-block">این توضیحات فقط برای راهنمایی است.</span>
                                </div>
                            </div>
                            <div class="form-group form-md-line-input">
                                <label class="col-md-1 control-label" for="Category">سطح دسترسی</label>
                                <div class="col-md-11">
                                    <select id="CategoryIds" name="CategoryIds[]" class="form-control select2-multiple" multiple>
                                        @foreach (var item in ViewBag.RoleList)
                                        {
                                            <option value="@item.Id">@item.Title</option>
                                        }
                                    </select>
                                    <div class="form-control-focus"> </div>
                                    <span class="help-block"></span>
                                </div>
                            </div>
                        </div>
                        <div class="form-actions">
                            <div class="row">
                                <div class="col-md-offset-2 col-md-10">
                                    <button type="reset" class="btn default">کنسل</button>
                                    <button type="submit" data-loading-text="ارسال..." class="btn blue btn-loading ">تایید</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!-- END SAMPLE FORM PORTLET-->
        </div>
    </div>
</div>
@section Javascripts{
    <script src="~/Content/js/jquery.validate.js"></script>
    <script src="~/Content/js/jquery.validate.unobtrusive.js"></script>
    <script src="~/Content/js/spin.min.js"></script>
    <script src="~/Content/js/ladda.min.js"></script>
    <script src="~/Content/kartik-v-bootstrap-fileinput/js/plugins/piexif.min.js"></script>
    <script src="~/Content/kartik-v-bootstrap-fileinput/js/plugins/sortable.min.js"></script>
    <script src="~/Content/kartik-v-bootstrap-fileinput/js/plugins/purify.min.js"></script>
    @*<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" type="text/javascript"></script>*@
    <script src="~/Content/kartik-v-bootstrap-fileinput/js/fileinput.js"></script>
    <script src="~/Content/kartik-v-bootstrap-fileinput/js/locales/fa.js"></script>
    <script src="~/Content/js/select2.min.js"></script>
    <script type="text/javascript">

        var form1 = $('form[data-loading-text]');
        var error1 = $('.alert-danger', form1);
        var success1 = $('.alert-success', form1);

        form1.validate({
            errorElement: 'span', //default input error message container
            errorClass: 'help-block help-block-error', // default input error message class
            focusInvalid: false, // do not focus the last invalid input
            ignore: "",  // validate all fields including form hidden input
            invalidHandler: function (event, validator) { //display error alert on form submit
                success1.hide();
                error1.show();
                App.scrollTo(error1, -200);
            },
            rules: {
                password: "required",
                password_again: {
                    equalTo: "#password"
                },

                errorPlacement: function (error, element) { // render error placement for each input type
                    var cont = $(element).parent('.input-group');
                    if (cont.size() > 0) {
                        cont.after(error);
                    } else {
                        element.after(error);
                    }
                },

                highlight: function (element) { // hightlight error inputs

                    $(element)
                        .closest('.form-group').addClass('has-error'); // set error class to the control group
                },

                unhighlight: function (element) { // revert the change done by hightlight
                    $(element)
                        .closest('.form-group').removeClass('has-error'); // set error class to the control group
                },

                success: function (label) {
                    label
                        .closest('.form-group').removeClass('has-error'); // set success class to the control group
                },

                submitHandler: function (form) {
                    success1.show();
                    error1.hide();
                    form.submit();
                    form1.button('loading')
                }
            }
        });

        var btnCust = '<button type="button" class="btn btn-secondary" title="Add picture tags" ' +
            'onclick="alert(\'Call your custom code here.\')">' +
            '<i class="glyphicon glyphicon-tag"></i>' +
            '</button>';
        $("#user-avatar").fileinput({
            overwriteInitial: true,
            maxFileSize: 1500,
            showClose: false,
            showCaption: false,
            browseLabel: '',
            removeLabel: '',
            browseIcon: '<i class="glyphicon glyphicon-folder-open"></i>',
            removeIcon: '<i class="glyphicon glyphicon-remove"></i>',
            removeTitle: 'Cancel or reset changes',
            elErrorContainer: '#kv-avatar-errors-1',
            msgErrorClass: 'alert alert-block alert-danger',
            defaultPreviewContent: '<img src="/uploads/default_avatar_male.jpg" alt="Your Avatar">',
            layoutTemplates: { main2: '{preview} ' + btnCust + ' {remove} {browse}' },
            allowedFileExtensions: ["jpg", "png", "gif"]
        });

        $('document').ready(function () {
            $('#CategoryIds').select2({ dir: "rtl", language: "fa" });
        });
    </script>

}
